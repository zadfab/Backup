<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Ezzy Dashboard</title>

  <!-- Custom fonts for this template-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link href="{% static 'vendor/fontawesome-free/css/all.min.css' %}" rel="stylesheet" type="text/css">
  <link href=" https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

  <!-- Custom styles for this template-->
  <link href="{% static 'css/sb-admin-2.min.css' %}" rel="stylesheet">

</head>
<style>

</style>
<script type="text/javascript" src="{%static 'customer_update.js'%}">


</script>
<script>
 $(document).ready(function(){
        $("#heading").text('Database Graph');
       $("#graph").text("Loading Graph please wait ....");
      $.get("{%static 'optimised_graph.html'%}",function(data,status){
        $("#graph").html(data);

      });

      $.get("{%static 'stacked_graph.html'%}",function(data,status){
        $("#graph2").html(data);
        });
    });


function st(){
$("#heading").text('Database Table');
$("#scheduler_table").show(500);
$("#customer_table_button").hide();
$("#customer_table").hide();
$("#Template_table").hide();
$("#message_table").hide();
$("#graph").hide();
$("#graph2").hide();
}
function ct(){
$("#heading").text('Database Table');
$("#customer_table_button").show();
$("#scheduler_table").hide();
$("#customer_table").show(500);
$("#Template_table").hide();
$("#message_table").hide();
$("#graph").hide();
$("#graph2").hide();
}
function tt(){
$("#heading").text('Database Table');
$("#customer_table_button").hide();
$("#scheduler_table").hide();
$("#customer_table").hide();
$("#Template_table").show(500);
$("#message_table").hide();
$("#graph").hide();
$("#graph2").hide();
}
function mft(){
$("#heading").text('Database Table');
$("#customer_table_button").hide();
$("#scheduler_table").hide();
$("#customer_table").hide();
$("#Template_table").hide();
$("#message_table").show(500);
$("#graph").hide();
$("#graph2").hide();
}
function graph(){
$("#heading").text('Database Graph');
$("#customer_table_button").hide();
$("#scheduler_table").hide();
$("#customer_table").hide();
$("#Template_table").hide();
$("#message_table").hide();
$("#graph").show(500);
$("#graph2").show(500);
}
function but(obj){

var now = $(obj).attr("id");
var ezzy ="#"+ "ezzy_id" + now;
var cust ="#"+ "customer_name" + now;
var email ="#"+ "email_address" + now;
var phone ="#"+ "phone_number" + now;
var dnd ="#"+ "dnd" + now;
var temp ="#"+ "temp" + now;


ezzy = $(ezzy).text();
cust = $(cust).text();
email = $(email).text();
phone = $(phone).text();
dnd = $(dnd).text();
temp = $(temp).text();


$("#ezzy_id").val(ezzy);
$("#name").val(cust);
$("#email").val(email);
$("#contact").val(phone);
$("#dnd").val(dnd);

}

function no_change(){

$("#change").show(200).delay(3000);
$("#change").hide(200);


}

</script>
<body id="page-top">

  <!-- Page Wrapper -->
  <!-- secondary screen -->
  <div id="wrapper">
      <div id="myModal" class="modal fade" role="dialog">
          <div class="modal-dialog modal-lg modal-dialog-centered">

              <!-- Modal content-->
              <div class="modal-content">
                  <div class="modal-header">

                      <h4 class="modal-title">Update the entries</h4>
                  </div>
                  <form method="post" action="update">
                      {%csrf_token%}
                  <div class="modal-body">
                      <h3 style="padding:0px;margin:0px;text-align:left;font-size:20px" >Ezzy Id</h3><h3 style="padding:0px;margin:0px;text-align:left;font-size:20px;display:none;" id="change"  >Can't Change Ezzy Id</h3>

                      <input type="text" class="form-control" name="ezzy_id" id="ezzy_id" onmousedown= no_change() readonly>

                      <br>
                      <h3 style="padding:0px;margin:0px;text-align:left;font-size:20px">Customer Name</h3>
                      <input type="text" class="form-control" name="name" id="name" placeholder="name"><br>
                      <h3 style="padding:0px;margin:0px;text-align:left;font-size:20px">Email Address</h3>
                      <input type="text" class="form-control" name="email"  id="email" placeholder="email"><br>
                      <h3 style="padding:0px;margin:0px;text-align:left;font-size:20px">Phone Number</h3>
                      <input type="text" class="form-control" name="contact" id="contact" placeholder="contact"><br>
                      <h3 style="padding:0px;margin:0px;text-align:left;font-size:20px"> DND Status</h3>

                      <select   class="form-control" name="dnd" id="dnd">
                          <option value="True">True</option>
                          <option value="False">False</option>
                      </select><br>

                  </div>
                  <div class="modal-footer">

                      <button type="submit" class="btn btn-primary" onclick=save()>Save changes</button>

                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                  </div>
                  </form>
              </div>

          </div>
      </div>
      <!-- secondary screen ends -->
      <div id="add_Modal" class="modal fade" role="dialog">
          <div class="modal-dialog modal-lg modal-dialog-centered">

              <!-- Modal content-->
              <div class="modal-content">
                  <div class="modal-header">

                      <h4 class="modal-title">Add  Entry</h4>
                  </div>

                      <div class="modal-body">

                          <small  class="form-text text-muted">Enter New Ezzy ID</small>
                          <input type="text" class="form-control" name="ezzy_id" id="add_ezzy" placeholder="Ezzy id"><br>
                          <input type="text" class="form-control" name="name" id="add_name" placeholder="Customer Name"><br>
                          <input type="text" class="form-control" name="email"  id="add_email" placeholder="Email"><br>
                          <input type="text" class="form-control" name="contact" id="add_contact" placeholder="Phone Number"><br>
                          <label for="dnd">DND status</label>
                          <select   class="form-control" name="dnd" id="add_dnd">
                              <option value="True">True</option>
                              <option value="False">False</option>
                          </select><br>

                      </div>
                      <div class="modal-footer">

                          <button  class="btn btn-primary" id="add_customer_data">Add Entry</button>

                          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                      </div>

              </div>

          </div>
      </div>
    <!-- Sidebar -->
    <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

      <!-- Sidebar - Brand -->
      <a class="sidebar-brand d-flex align-items-center justify-content-center" href="index.html">
        <div class="sidebar-brand-icon rotate-n-15">
          <i class="fas fa-laugh-wink"></i>
        </div>
        <div class="sidebar-brand-text mx-3">Ezzy Talk</div>
      </a>

      <!-- Divider -->
      <hr class="sidebar-divider my-0">

      <!-- Nav Item - Dashboard -->
      <li onclick=graph() class="nav-item active">
        <a class="nav-link" >
          <i class="fas fa-fw fa-tachometer-alt"></i>
          <span>Dashboard</span></a>
      </li>

      <!-- Divider -->
      <hr class="sidebar-divider">

      <!-- Heading -->
      <div class="sidebar-heading">
        Options
      </div>

      <!-- Nav Item - Pages Collapse Menu -->
      <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
          <i class="fas fa-fw fa-cog"></i>
          <span>Databases</span>
        </a>
        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
          <div class="bg-white py-2 collapse-inner rounded">

            <a class="collapse-item"  onclick = ct()>Customer Table</a>
            <a class="collapse-item"  onclick = st()>Scheduler Table</a>
            <a class="collapse-item" onclick = tt()>Templates Table</a>
            <a class="collapse-item" onclick = mft()>Message Forward Table</a>

          </div>
        </div>
      </li>

      <!-- Nav Item - Utilities Collapse Menu -->
      <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseUtilities" aria-expanded="true" aria-controls="collapseUtilities">
          <i class="fas fa-fw fa-wrench"></i>
          <span>Test Cases</span>
        </a>
        <div id="collapseUtilities" class="collapse" aria-labelledby="headingUtilities" data-parent="#accordionSidebar">
          <div class="bg-white py-2 collapse-inner rounded">

            <a class="collapse-item" >Scheduler Test</a>
            <a class="collapse-item" >Entity Extraction</a>
            <a class="collapse-item" >Cm api</a>
            <a class="collapse-item" >DND</a>
            <a class="collapse-item" >Customer Integration</a>

        </div>
      </li>

      <!-- Divider -->
      <hr class="sidebar-divider">

      <!-- Heading -->
      <div class="sidebar-heading">
        Settings
      </div>

      <!-- Nav Item - Pages Collapse Menu -->
      <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapsePages" aria-expanded="true" aria-controls="collapsePages">
          <i class="fas fa-fw fa-folder"></i>
          <span>Setting</span>
        </a>
        <div id="collapsePages" class="collapse" aria-labelledby="headingPages" data-parent="#accordionSidebar">
          <div class="bg-white py-2 collapse-inner rounded">

            <a class="collapse-item" >Login</a>
            <a class="collapse-item" >Register</a>
            <a class="collapse-item" >Forgot Password</a>

            <a class="collapse-item" >404 Page</a>
            <a class="collapse-item" >Blank Page</a>
          </div>
        </div>
      </li>

      <!-- Nav Item - Charts -->
      <li class="nav-item">
        <a class="nav-link" href="charts.html">
          <i class="fas fa-fw fa-chart-area"></i>
          <span>Support</span></a>
      </li>



      <!-- Divider -->
      <hr class="sidebar-divider d-none d-md-block">

      <!-- Sidebar Toggler (Sidebar) -->
      <div class="text-center d-none d-md-inline">
        <button class="rounded-circle border-0" id="sidebarToggle"></button>
      </div>

    </ul>
    <!-- End of Sidebar -->

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

      <!-- Main Content -->
      <div id="content">

        <!-- Topbar -->

        <!-- End of Topbar -->

        <!-- Begin Page Content -->


          <!-- Content Row -->
          <div class="row">

            <!-- Content Column -->


            <div class="col-lg-12 mb-12">

              <!-- Illustrations -->
              <div class="card shadow mb-4">
                <div class="card-header py-3">
                  <h6 id="heading" class="m-0 font-weight-bold text-primary">Database Table</h6>
                </div>
                <div class="card-body">
				<!-- Graph-->
                    <div>
				<div id = "graph" style="width:48%;height:100%;float:left">

				</div>
                    <div id = "graph2" style="width:48%;height:100%;float:right">

                    </div>
                    </div>
				<!-- graph ends-->
				<!-- Scheduler table-->
				<div id="scheduler_table" style="display:none">
                  <h2 class="m-0 font-weight-bold text-primary">Scheduler Table</h2>
					<div class="table-wrapper" style="max-height:500px;">
						<table class="fl-table" >
						<thead>
							<tr>
								<th>Scheduler ID</th>
								<th>Date</th>
								<th>Remarks</th>

							</tr>
						</thead>
				<tbody>
					{% for i in schedule_data %}
					<tr>
						<td>{{i.scheduler_id}}</td>
						<td>{{i.time_stamp}}</td>
						<td>{{i.status}}</td>

					</tr>

					{% endfor %}
				</tbody>
				</table>
				</div>

						</div>
						<!-- Scheduler table ENDS-->
						<!-- customer table-->
				<div id="customer_table" style="display:none;max-height:700px;overflow-y:scroll;">
                  <h2 class="m-0 font-weight-bold text-primary">customer Table</h2>
					<div class="table-wrapper" >
						<table class="fl-table " >
						<thead>
							<tr>
                                <th> Index</th>
								<th>Ezzy ID</th>
								<th>Customer Name</th>
								<th>Email Address</th>
								<th>Phone Number</th>
								<th>DND Status</th>
                                <th>Template Status</th>
                                <th id="cust_refresh">Refresh</th>





							</tr>

						</thead>

				<tbody >

					{% for i in customer_data %}

					<tr>
                        <td >{{i.id}}</td>
						<td id="ezzy_id{{ forloop.counter }}">{{i.ezzy_id}}</td>

						<td id="customer_name{{ forloop.counter }}">{{i.customer_name}}</td>
						<td id="email_address{{ forloop.counter }}">{{i.email_address}}</td>
						<td id="phone_number{{ forloop.counter }}">{{i.phone_number}}</td>
						<td id="dnd{{ forloop.counter }}">{{i.DND_status}}</td>
						<td id="temp{{ forloop.counter }}">{{i.opt_out_template_status}}</td>
						<td> <button  id="{{ forloop.counter }}" type="button" class="btn btn-success btn-sm " onclick="but(this)"   data-toggle="modal" data-target="#myModal">Edit</button></td>


					</tr>

					{% endfor %}

				</tbody>
				</table>

				</div>




				</div>
				<!-- Scheduler table ENDS-->
				<!-- Template table-->
				<div id="Template_table" style="display:none;">
                  <h2 class="m-0 font-weight-bold text-primary">Template Table</h2>
					<div class="table-wrapper">
						<table class="fl-table">
						<thead>
							<tr>
								<th>Template ID</th>
								<th>Template name</th>
								<th>Template name on cm.com</th>
							</tr>
						</thead>
				<tbody>
					{% for i in template_data %}
					<tr>
						<td>{{i.template_id}}</td>
						<td>{{i.template_name}}</td>
						<td>{{i.template_name_on_cm_com}}</td>

					</tr>

					{% endfor %}
				</tbody>
				</table>
				</div>

						</div>
						<!-- Template table ENDS-->
						<!-- message table-->
				<div id="message_table" style="display:none">
                  <h2 class="m-0 font-weight-bold text-primary">Message Table</h2>
					<div class="table-wrapper">
						<table class="fl-table">
						<thead>
							<tr>
								<th>Message ID</th>
								<th>Scheduler name</th>
								<th>Email address</th>
								<th>Status</th>
								<th>Remark</th>

							</tr>
						</thead>
				<tbody>
					{% for i in message_data %}
					<tr>
						<td>{{i.message_id}}</td>
						<td>{{i.scheduler_id}}</td>
						<td>{{i.email_address}}</td>
						<td>{{i.status}}</td>
						<td>{{i.remark}}</td>

					</tr>

					{% endfor %}
				</tbody>
				</table>
				</div>

						</div>
						<!-- message table ENDS-->
					  </div>
					</div>




            </div>
          </div>

        </div>
        <!-- /.container-fluid -->

      </div>
      <!-- End of Main Content -->

      <button id="customer_table_button" type="button" class="btn btn-success btn-sm " style="bottom : 10px;right : 50px;position: fixed;display:none"  data-toggle="modal" data-target="#add_Modal"><i class="fa fa-plus" aria-hidden="true"></i> Add New Entry</button>

    </div>
    <!-- End of Content Wrapper -->

  </div>
  <!-- End of Page Wrapper -->

  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>



  <!-- Bootstrap core JavaScript-->
  <script src="{% static 'vendor/jquery/jquery.min.js' %}"></script>
  <script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>

  <!-- Core plugin JavaScript-->
  <script src="{% static 'vendor/jquery-easing/jquery.easing.min.js' %}"></script>

  <!-- Custom scripts for all pages-->
  <script src="{% static 'js/sb-admin-2.min.js' %}"></script>

  <!-- Page level plugins -->
  <script src="{% static 'vendor/chart.js/Chart.min.js' %}"></script>

  <!-- Page level custom scripts -->
  <script src="{% static 'js/demo/chart-area-demo.js' %}"></script>
  <script src="{% static 'js/demo/chart-pie-demo.js' %}"></script>

</body>
<style>
*{
box-sizing: border-box;
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
}
body{
font-family: Helvetica;
-webkit-font-smoothing: antialiased;
background: rgba( 71, 147, 227, 1);
}
h2{
text-align: center;
font-size: 18px;
text-transform: uppercase;
letter-spacing: 1px;

padding: 30px 0;
}

/* Table Styles */

.table-wrapper{
margin: 10px 70px 70px;
box-shadow: 0px 35px 50px rgba( 0, 0, 0, 0.2 );
}

.fl-table {
border-radius: 5px;
font-size: 12px;
font-weight: normal;
border: none;
border-collapse: collapse;
width: 100%;
max-width: 100%;
white-space: nowrap;
background-color: white;
}

.fl-table td, .fl-table th {
text-align: center;
padding: 10px;
}

.fl-table td {
border-right: 1px solid #f8f8f8;
font-size: 12px;
}

.fl-table thead th {
color: #ffffff;
background: #4FC3A1;
}


.fl-table thead th:nth-child(odd) {
color: #ffffff;
background: #324960;
}

.fl-table tr:nth-child(even) {
background: #F8F8F8;
}

/* Responsive */

@media (max-width: 767px) {
.fl-table {
display: block;
width: 100%;
}
.table-wrapper:before{
content: "Scroll horizontally >";
display: block;
text-align: right;
font-size: 11px;
color: white;
padding: 0 0 10px;
}
.fl-table thead, .fl-table tbody, .fl-table thead th {
display: block;
}
.fl-table thead th:last-child{
border-bottom: none;
}
.fl-table thead {
float: left;
}
.fl-table tbody {
width: auto;
position: relative;
overflow-x: auto;
}
.fl-table td, .fl-table th {
padding: 20px .625em .625em .625em;
height: 60px;
vertical-align: middle;
box-sizing: border-box;
overflow-x: hidden;
overflow-y: auto;
width: 120px;
font-size: 13px;
text-overflow: ellipsis;
}
.fl-table thead th {
text-align: left;
border-bottom: 1px solid #f7f7f9;
}
.fl-table tbody tr {
display: table-cell;
}
.fl-table tbody tr:nth-child(odd) {
background: none;
}
.fl-table tr:nth-child(even) {
background: transparent;
}
.fl-table tr td:nth-child(odd) {
background: #F8F8F8;
border-right: 1px solid #E6E4E4;
}
.fl-table tr td:nth-child(even) {
border-right: 1px solid #E6E4E4;
}
.fl-table tbody td {
display: block;
text-align: center;
}
}
</style>
</html>
